Enum "usuarios_rol_enum" {
  "estudiante"
  "juez"
  "administrador"
}

Table "calificaciones" {
  "id" int [pk, not null, increment]
  "juez_id" int [not null]
  "estudiante_id" int [not null]
  "concurso_id" int [not null]
  "criterio_id" int [not null]
  "puntuacion" decimal(5,2) [not null]
  "comentario" text
  "fecha_calificacion" timestamp [default: `CURRENT_TIMESTAMP`]

  Indexes {
    concurso_id [type: btree, name: "concurso_id"]
    criterio_id [type: btree, name: "criterio_id"]
    estudiante_id [type: btree, name: "estudiante_id"]
    juez_id [type: btree, name: "juez_id"]
  }
}

Table "concursos" {
  "id" int [pk, not null, increment]
  "nombre" varchar(255) [not null]
  "descripcion" text
  "fecha_inicio" date [not null]
  "fecha_fin" date [not null]
  "creado_por" int [not null]

  Indexes {
    creado_por [type: btree, name: "creado_por"]
  }
}

Table "criterios" {
  "id" int [pk, not null, increment]
  "concurso_id" int [not null]
  "nombre" varchar(255) [not null]
  "peso" decimal(5,2) [not null]

  Indexes {
    concurso_id [type: btree, name: "concurso_id"]
  }
}

Table "inscripciones" {
  "id" int [pk, not null, increment]
  "estudiante_id" int [not null]
  "concurso_id" int [not null]
  "fecha_inscripcion" timestamp [default: `CURRENT_TIMESTAMP`]

  Indexes {
    concurso_id [type: btree, name: "concurso_id"]
    (estudiante_id, concurso_id) [unique, name: "estudiante_id"]
  }
}

Table "usuarios" {
  "id" int [pk, not null, increment]
  "nombre" varchar(100) [not null]
  "correo" varchar(100) [unique, not null]
  "contrasena" varchar(255) [not null]
  "rol" usuarios_rol_enum [not null]
  "creado_en" timestamp [default: `CURRENT_TIMESTAMP`]
}

Ref "calificaciones_ibfk_1":"usuarios"."id" < "calificaciones"."juez_id" [delete: cascade]

Ref "calificaciones_ibfk_2":"usuarios"."id" < "calificaciones"."estudiante_id" [delete: cascade]

Ref "calificaciones_ibfk_3":"concursos"."id" < "calificaciones"."concurso_id" [delete: cascade]

Ref "calificaciones_ibfk_4":"criterios"."id" < "calificaciones"."criterio_id" [delete: cascade]

Ref "concursos_ibfk_1":"usuarios"."id" < "concursos"."creado_por" [delete: cascade]

Ref "criterios_ibfk_1":"concursos"."id" < "criterios"."concurso_id" [delete: cascade]

Ref "inscripciones_ibfk_1":"usuarios"."id" < "inscripciones"."estudiante_id" [delete: cascade]

Ref "inscripciones_ibfk_2":"concursos"."id" < "inscripciones"."concurso_id" [delete: cascade]
